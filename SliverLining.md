# ğŸ‘©â€ğŸ’» Project: Silver Lining
### í‚¤ì˜¤ìŠ¤í¬ë¥¼ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ê³ ë ¹ì¸µ ì†Œë¹„ìì—ê²Œë„ ì ‘ê·¼ì´ ìš©ì´í•œ í‚¤ì˜¤ìŠ¤í¬ AI ì„œë¹„ìŠ¤.

<br>

## ğŸ‘¨â€ğŸ« Project Introduction (Team ì‹¤ë²„ë¼ì´ë‹)
#### ë‚˜ì´ë“¦ì— ë”°ë¥¸ ì‹ ì²´ì˜ ë…¸í™”ê°€ ë‹¨ì ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì§ˆ ìˆ˜ ìˆëŠ” ìƒí™©ì—ì„œ ê¸ì •ì ìœ¼ë¡œ ìƒê°í•´ë³´ìëŠ” ì·¨ì§€ë¥¼ ë‹´ì€ í”„ë¡œì íŠ¸. 
- í‚¤ì˜¤ìŠ¤í¬ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ì–´ë ¤ìš´ ê³ ë ¹ì˜ ê³ ê°ì´ í‚¤ì˜¤ìŠ¤í¬ë¥¼ ì‰½ê²Œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•œ ì„œë¹„ìŠ¤
- ì–¼êµ´ ì¸ì‹ì„ í†µí•´ í‚¤ì˜¤ìŠ¤í¬ë¥¼ ì´ìš©í•˜ë ¤ëŠ” ì‚¬ìš©ìì˜ ë‚˜ì´ë¥¼ ìë™ìœ¼ë¡œ íŒŒì•…í•˜ì—¬ ëŒ€ìƒ ì—°ë ¹ëŒ€ì— ë§ì¶˜ UI/UXë¡œ ê¸ì •ì ì¸ ì´ìš© ê²½í—˜ ìœ ë„

<br>

## ğŸ’¡Function
- Django admin customization: ìœ ì €, ë©”ë‰´, í•´ì‹œíƒœê·¸ CRUD 
- ì–¼êµ´ ì¸ì‹ ê¸°ëŠ¥: Opencv ì–¼êµ´ ì¸ì‹ í›„ ì´ë¯¸ì§€ë¥¼ í†µí•œ ë‚˜ì´ ì¶”ì •
- ìŒì„± ì¸ì‹ ê¸°ëŠ¥: STTë¡œ ì…ë ¥ ë°›ì€ ë°ì´í„°ë¥¼ AIë‹µë³€ ë° ë©”ë‰´ ì¶”ì²œ
- ì—°ë ¹ë³„ ë§ì¶¤ í…œí”Œë¦¿: ê³ ë ¹ì¸µê³¼ ë¹„ê³ ë ¹ì¸µì˜ UI/UXì™€ ê¸°ëŠ¥ì˜ ì°¨ë³„í™”ë¥¼ í†µí•´ ì—°ë ¹ ë§ì¶¤ ì„œë¹„ìŠ¤ ì œê³µ
- AWSë¥¼ ì´ìš© ì›¹ ì„œë¹„ìŠ¤ ì œê³µ 
- javascriptë¥¼ ì´ìš©í•œ ìƒˆë¡œê³ ì¹¨ì—†ì´ í”„ë¡ íŠ¸ì—”ë“œ ë°ì´í„° ë³€ê²½


<br>


## â²ï¸ Development time 
- 2024.05.13(ì›”) ~ 2023.06.12(ìˆ˜)


<br>

## ğŸ’» Development Environment
- **Programming Language** : Python 3.10
- **Web Framework** : DJANGO 4.2
- **Database** : SQLite (for development and testing), PostgreSQL (for Release)
- **IDE** : Visual Studio Code, Pycharm
- **Version Control** : Git, GitHub, Docker
- **Communication** : Zep, Slack, Figma, Zoom
- **Server** : AWS(EC2)
  
<br>

## ğŸ–¥ï¸Preview


<p align="center">
  <strong>â­ë¡œê·¸ì¸</strong>
</p>
  
<p align="center">
  <img src="https://github.com/user-attachments/assets/7bd48f2d-fecd-49b3-8003-315307faf77f" alt="ë¡œê·¸ì¸">
</p>

<p align="center">
  <strong>â­ë©”ë‰´ ë“±ë¡</strong>
</p>
  
<p align="center">
  <img src="https://github.com/user-attachments/assets/50464aae-d43d-4921-a855-8e394a8425b7" alt="ë©”ë‰´ì¶”ê°€">
</p>

<p align="center">
  <strong>â­ì–¼êµ´ì¸ì‹(ì¼ë°˜)</strong>
</p>

<p align="center">
  <img src="https://github.com/user-attachments/assets/0229a614-8ca4-4c42-81ee-d1cab77b2324" alt="ì–¼êµ´ì¸ì‹(ì¼ë°˜ì¸)">
</p>

<p align="center">
  <strong>â­ì–¼êµ´ì¸ì‹(ê³ ì—°ë ¹)</strong>
</p>

<p align="center">
  <img src="https://github.com/user-attachments/assets/4b958a0f-c660-45fe-9a85-dd853cd460ea" alt="ì–¼êµ´ì¸ì‹(ê³ ì—°ë ¹)">
</p>

<p align="center">
  â­ íƒœê·¸ë³„ ë©”ë‰´ ë¶„ë¥˜ â­ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  â­ AI ë©”ë‰´ ì¶”ì²œ â­ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  â­ ë‚˜ë¼ë³„ ì–¸ì–´ë³€ê²½ â­
</p>

<p align="center">
  <img src="https://github.com/user-attachments/assets/9d139424-a754-4ad1-99f8-0ef202081a64" alt="íƒœê·¸ë³„ ë©”ë‰´ ë¶„ë¥˜" width="30%">
  &nbsp;&nbsp;&nbsp;
  <img src="https://github.com/user-attachments/assets/c03249fc-a46b-4589-9f1c-b3a4386d9493" alt="AI ë©”ë‰´ ì¶”ì²œ" width="30%">
  &nbsp;&nbsp;&nbsp;
  <img src="https://github.com/user-attachments/assets/cf5efe55-b1f0-40bf-b578-f3e333b02d2f" alt="ì–¸ì–´ë³„ ë©”ë‰´" width="30%">
</p>

<p align="center">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  â­ ê²°ì œ â­ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  â­ ê³ ì—°ë ¹ ìŒì„±ì¸ì‹ â­ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  â­ ê° í‚¤ì˜¤ìŠ¤í¬ í™”ë©´ ì „í™˜ â­
</p>

<p align="center">
  <img src="https://github.com/user-attachments/assets/f476b6d6-0877-4669-bfe2-0571030fb5d1" alt="ê²°ì œ" width="30%">
  &nbsp;&nbsp;&nbsp;
  <img src="https://github.com/user-attachments/assets/30b94cb9-89a5-4738-8025-e48b31b1b31f" alt="ê³ ì—°ë ¹ ìŒì„±ì¸ì‹" width="30%">
  &nbsp;&nbsp;&nbsp;
  <img src="https://github.com/user-attachments/assets/1e1f576b-bb08-4acf-99bb-2f1d3c0a3266" alt="í‚¤ì˜¤ìŠ¤í¬í™”ë©´ì „í™˜" width="30%">
</p>


<br>

## ğŸ“ Project

  - ì‹œì—° ì˜ìƒ : [ìœ íŠœë¸Œ ì‹œì—°ì˜ìƒ](https://www.youtube.com/watch?v=Q7jmeQ_tOPE&t=42s)ì„ í†µí•˜ì—¬ í™•ì¸

  - ì•„ì´ë””ì–´ íšŒì˜ : ê°œë°œ ê¸°íš ë‹¨ê³„ ë° ì•„ì´ë””ë¥¼ ë…¼ì˜í•˜ê¸° ìœ„í•´ [í”¼ê·¸ë§ˆ](https://www.figma.com/board/CUporczK2kYaCbjQQIDoVO/final-project?node-id=0-1&t=99pB1pcpflZp4QJg-0)ë¥¼ í™œìš©í•˜ì—¬ ì‘ì„±

  - íŠ¸ëŸ¬ë¸” ìŠˆíŒ… : ë¬¸ì œì  ë³´ì™„ ë° ê°œì„ ì„ ìœ„í•´ [ë…¸ì…˜](https://teamsparta.notion.site/8-silver-lining-f9ee581e81e8456c8d78729434c5ca06)ì„ í™œìš©í•˜ì—¬ ê¸°ë¡

![image](https://github.com/user-attachments/assets/2ded4c7c-f96a-43a2-a67f-cfaa198e72af)

<br>

## ğŸ’­ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •

- OpenAI GPT-4o ì ìš©
    
    ì´ˆê¸°: OpenAI GPT 3.5-turbo ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤ì—ì„œ ê³ ê°ê³¼ì˜ ëŒ€í™”ë¥¼ ì²˜ë¦¬í•˜ê³ ì ì‹œë„
    ë³€ê²½: í…ŒìŠ¤íŠ¸ ê²°ê³¼ GPT 4oë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ responseTextì˜ ì •í™•ë„ê°€ ê°œì„ ëœë‹¤ê³  íŒë‹¨
    êµ¬í˜„ ê²°ê³¼: ê³ ê°ê³¼ì˜ ëŒ€í™”ì—ì„œ ìƒëŒ€ì ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ë¥¼ ìœ ë„í•˜ê³ , ì ì ˆí•œ ë‹µë³€ì„ ì œê³µí•˜ëŠ” ë° ì„±ê³µ
    
- ì–¼êµ´ì¸ì‹ ëª¨ë¸ ë³€ê²½

    ì´ˆê¸°: deepface librarayë¥¼ ì‚¬ìš©í•˜ì—¬ ì–¼êµ´ì¸ì‹ ê¸°ëŠ¥ì„ êµ¬í˜„í•¨
    ë³€ê²½: deepfaceì˜ ë‚˜ì´ ì¶”ì •ê°’ì˜ ì •í™•ë„ ì´ìŠˆê°€ ë°œìƒ -> GPT 4oì˜ í”„ë¡¬í”„íŠ¸ ìˆ˜ì •ìœ¼ë¡œ ë” ì •í™•ë„ ë†’ì€ ë‚˜ì´ ì¶”ì •ê°’ì„ ì–»ìŒ
    êµ¬í˜„ ê²°ê³¼: GPT-4o ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì–¼êµ´ì¸ì‹ ê¸°ëŠ¥ì„ êµ¬í˜„. ì‚¬ìš©ìì˜ ì–¼êµ´ì„ ì •í™•í•˜ê²Œ ì¸ì‹í•˜ê³ , í•´ë‹¹ ì‚¬ìš©ìì—ê²Œ ë§ì¶¤í˜• ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë° ì„±ê³µ
    
- STT, TTS ë¸Œë¼ìš°ì € ê¸°ëŠ¥ í™œìš©
    
    ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ STT ë° TTS ê¸°ëŠ¥ì„ JavaScriptë¥¼ í†µí•´ í™œìš©í•˜ì—¬ ìŒì„±ì¸ì‹ ë° ìŒì„±ì¶œë ¥ ê¸°ëŠ¥ì„ êµ¬í˜„
    êµ¬í˜„ ê²°ê³¼: ë¸Œë¼ìš°ì € ìƒì—ì„œ ìŒì„±ì¸ì‹ê³¼ ìŒì„±ì¶œë ¥ì´ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë”ìš± í¸ë¦¬í•œ í™˜ê²½ì„ ì œê³µí•˜ëŠ” ë° ì„±ê³µ
    
- JSON ë°ì´í„° ì „ì†¡ ë° ë¶€íŠ¸ìŠ¤íŠ¸ë© í™œìš©
    
    JavaScriptë¥¼ í†µí•´ JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ìœ¼ë©°, ë¶€íŠ¸ìŠ¤íŠ¸ë©ì„ í™œìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë¹ ë¥´ê²Œ ê°œë°œ
    êµ¬í˜„ ê²°ê³¼: í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹˜ì§€ ì•Šê³ ë„ ë©”ë‰´ ë³€ê²½ ë° ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©ìê°€ ì›í™œí•˜ê²Œ ì£¼ë¬¸ì„ ì§„í–‰
    
- Admin í˜ì´ì§€ í™œìš©
    
    Djangoì˜ Admin í˜ì´ì§€ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ User ë° Menu ê´€ë ¨ ë°ì´í„°ë¥¼ ê´€ë¦¬
    í•µì‹¬ ê¸°ëŠ¥: Admin í˜ì´ì§€ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì‰½ê²Œ ì¶”ê°€ ë° ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ í”„ë¡œì íŠ¸ ê°œë°œ ë‹¨ê³„ë¥¼ ì§„í–‰

- Redis ì ìš©

    ìŒì„±ì¸ì‹ìœ¼ë¡œ ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ì™€ì¤‘ì— GPT ë‹µë³€ì˜ ì •í™•ë„ í–¥ìƒì„ ìœ„í•´ í˜„ì¬ ì¥ë°”êµ¬ë‹ˆ í˜„í™©ì„ ì „ë‹¬í•  í•„ìš”ì„± ëŒ€ë‘
    ì—¬ëŸ¬ ì„ íƒì§€ ê°€ìš´ë° ìˆ˜ì •ì´ ì¦ê³ , êµ³ì´ DBì— ì¥ë°”êµ¬ë‹ˆì˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ Redis ì±„íƒ
    êµ¬í˜„ ê²°ê³¼: Redisë¥¼ ì‚¬ìš©í•˜ì—¬ elder_menu.htmlì˜ ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ì„ êµ¬í˜„
<br>


## ğŸ’»Technical Description

### 1. ì–¸ì–´ ë³€ê²½ê¸°ëŠ¥


<p align="center">
  <img src="https://github.com/user-attachments/assets/cf5efe55-b1f0-40bf-b578-f3e333b02d2f" alt="ì–¸ì–´ë³„ ë©”ë‰´" width="30%">
</p>


```python
# ì–¸ì–´ë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
def switch_language(request):
    lang = request.GET.get('lang', settings.LANGUAGE_CODE)
    if lang:
        # ì–¸ì–´ ë³€ê²½
        translation.activate(lang)
        # ì–¸ì–´ ì¿ í‚¤ ì„¤ì •
        response = redirect(request.META.get('HTTP_REFERER', '/'))
        response.set_cookie(settings.LANGUAGE_COOKIE_NAME, lang)
        return response
    return redirect(request.META.get('HTTP_REFERER', '/'))
```

ğŸ’¡ Djangoì˜ ê¸°ë³¸ ë²ˆì—­ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ê° ì–¸ì–´ì— ë§ì¶”ì–´ ë³€ê²½ ê°€ëŠ¥

### 2. AI ì¶”ì²œê¸°ëŠ¥

```python
class AIbot(APIView):
    def post(request):
        # POST ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©”ì†Œë“œì…ë‹ˆë‹¤.
        # AI ë´‡ì—ê²Œ ì…ë ¥ëœ í…ìŠ¤íŠ¸ë¥¼ ì „ë‹¬í•˜ê³  ì‘ë‹µì„ ë°›ìŠµë‹ˆë‹¤.
        input_text = request.data.get('inputText')
        current_user = request.user
        message, recommended_menu = bot(input_text, current_user)
        return Response({'responseText': message, 'recommended_menu': recommended_menu})
```

ğŸ’¡ POST ì…ë ¥ì‹œ bot.py ë‚´ë¶€ bot í•¨ìˆ˜ë¥¼ í†µí•˜ì—¬ ì¶”ì²œ ë©”ë‰´ ë° ë©”ì„¸ì§€ ìƒì„± í›„ return

<br>

<details>
<summary> ğŸ“— AI í”„ë¡¬í”„íŠ¸ </summary>

<br>

## í”„ë¡¬í”„íŠ¸
```python
def get_recommended_menus(client, input_text, current_user):
    system_data = f"""
        You are considered a staff member related to {category_text}.
        Our store offers the following menu items: {menu}.
        Additionally, we use the following hashtags in our store: {hashtags}.
        """

    system_output = f"""
        The format of the data I desire as a result is:
        "Recommended Menu: [menu_name]"
        For the "Recommended Menu" section, select three options that are most closely related to the customer's request and rank them accordingly.
        The main format of recommended menu should be "Recommended Menu: menu_name, menu_name, menu_name".
        The output of recommended menus must include three items. If fulfilling three items is difficult to achieve, go through the menu table to find the closest menu possible.
        It would be easier for you to consider hashtags when finding related menu.
        When there are more than one keyword that you take into account, you should prioritize the keyword that is related to the menu.
        For example, when the customer asks for 'iced coffee', you should consider the menu that is 'coffee', rather than 'iced' beverages.
        """
    completion = client.chat.completions.create(
        model="gpt-4o",
        messages=[
            {"role": "system", "content": system_data},
            {"role": "system", "content": system_output},
            {"role": "user", "content": input_text},
        ],
    )

    ai_response = completion.choices[0].message.content
    recommended_menu = []

    try:
        for line in ai_response.split('\n'):
            line = line.strip()  
            if line.startswith('Recommended Menu:'):
                recommended_menu = line.split('Recommended Menu: ')[1].strip().split(', ')
                break  

    except IndexError:
        recommended_menu = []

    return recommended_menu
```

</details>

### 3. ì–¼êµ´ ì¸ì‹ ê¸°ëŠ¥

```javascript
    function submitForm(imageData) {
        // FormData ê°ì²´ ìƒì„±
        var formData = new FormData();

        // ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ FormData ê°ì²´ì— ì¶”ê°€
        var blob = dataURItoBlob(imageData);
        formData.append('faceImageData', blob, 'face_image.jpeg');

        // CSRF í† í° ê°€ì ¸ì˜¤ê¸°
        const csrftoken = getCookie('csrftoken');

        // ì´ë¯¸ì§€ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° AJAX ìš”ì²­ ë³´ëƒ„
        $.ajax({
            url: '/orders/face_recognition/',
            method: 'POST',
            headers: {'X-CSRFToken': csrftoken},
            data: formData,
            processData: false,  // jQueryê°€ ë°ì´í„°ë¥¼ ì¿¼ë¦¬ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ë°©ì§€
            contentType: false,   // jQueryê°€ contentTypeì„ ì„¤ì •í•˜ëŠ” ê²ƒì„ ë°©ì§€
            success: function (response) {
                // ì„œë²„ ì‘ë‹µì„ ì„±ê³µì ìœ¼ë¡œ ë°›ì€ í›„ì— ìˆ˜í–‰í•  ì‘ì—…
                console.log('Success:', response);
                // ì–¼êµ´ ë‚˜ì´ í™•ì¸
                var ageNumber = response.age_number;
                // ë‚˜ì´ì— ë”°ë¼ í˜ì´ì§€ ë¦¬ë””ë ‰ì…˜
                if (ageNumber >= 60) {
                    window.location.href = "{% url 'orders:elder_start' %}";
                } else {
                    window.location.href = "{% url 'orders:menu' %}";
                }
            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
                // ì˜¤ë¥˜ ì²˜ë¦¬
            }
        });
    }
```

ğŸ’¡AJAXë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ë°ì´í„° ì „ì†¡

```python
@csrf_exempt
def face_recognition(request):
    if request.method == 'POST' and 'faceImageData' in request.FILES:
        # Get uploaded image
        uploaded_image = request.FILES['faceImageData']
        age_number = face(uploaded_image)

        return JsonResponse({'age_number': age_number})
    return HttpResponse("Please upload an image.")
```

ğŸ’¡ bot.py ë‚´ë¶€ì˜ face í•¨ìˆ˜ë¥¼ ì´ìš© ë‚˜ì´ê°’ ê³„ì‚°

<br>

<details>
<summary> ğŸ“— ì–¼êµ´ì¸ì‹ AI </summary>

<br>

```python
def face(uploaded_image):
    # Read the image using OpenCV
    image_data = uploaded_image.read()
    nparr = np.frombuffer(image_data, np.uint8)
    frame = cv2.imdecode(nparr, cv2.IMREAD_COLOR)

    # ì–¼êµ´ ì¸ì‹ì„ ìœ„í•œ ë¶„ë¥˜ê¸°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
    face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')

    # í‘ë°± ì´ë¯¸ì§€ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    # ì–¼êµ´ì„ ê°ì§€í•©ë‹ˆë‹¤.
    faces = face_cascade.detectMultiScale(gray, scaleFactor=1.1, minNeighbors=5, minSize=(30, 30))

    if len(faces) > 0:
        # ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ê³  base64ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
        image_path = "face.jpg"
        cv2.imwrite(image_path, frame)

        with open(image_path, "rb") as image_file:
            encoded_image = base64.b64encode(image_file.read()).decode('utf-8')

        base64_image = f"data:image/jpeg;base64,{encoded_image}"

        # OpenAI APIì— ìš”ì²­í•©ë‹ˆë‹¤.
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {settings.OPEN_API_KEY}"
        }

        instruction = """
                                    Although age can be difficult to predict, please provide an approximate number for how old the person in the photo appears to be. 
                                    Please consider that Asians tend to look younger than you might think.
                                    And Please provide an approximate age in 10-year intervals such as teens, 20s, 30s, 40s, 50s, 60s, 70s, or 80s.
                                    When you return the value, remove the 's' in the end of the age interval.
                                    For example, when you find the person to be in their 20s, just return the value as 20.
                                    Please return the inferred age in the format 'Estimated Age: [inferred age]'.
                                    """

        payload = {
            "model": "gpt-4o",
            "messages": [
                {
                    "role": "user",
                    "content": [
                        {
                            "type": "text",
                            "text": instruction,
                        },
                        {
                            "type": "image_url",
                            "image_url": {
                                "url": base64_image
                            }
                        }
                    ]
                }
            ],
            "max_tokens": 300
        }
        # OpenAI APIë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
        response = requests.post("https://api.openai.com/v1/chat/completions", headers=headers, json=payload)

        try:
            os.remove(image_path)
            print(f"{image_path} ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")

        except FileNotFoundError:
            print(f"{image_path} ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")

        # OpenAI APIì—ì„œ ë°˜í™˜ëœ ì‘ë‹µì„ íŒŒì‹±í•©ë‹ˆë‹¤.
        ai_answer = response.json()
        print("ai_answer", ai_answer)
        # ì¶”ì •ëœ ë‚˜ì´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        age_message = ai_answer["choices"][0]['message']['content']
        age = age_message.split("Estimated Age: ")[1].strip()
        age_number = int(age)
        print("ë‹¹ì‹ ì˜ ì–¼êµ´ë‚˜ì´ : ", age_number)
        return age_number
    return 20
```

</details>


<br>

## ğŸ“Œ Key Features

### 1. í‚¤ì˜¤ìŠ¤í¬ ì‚¬ìš©ì 
#### (1) ì–¼êµ´ì¸ì‹ì„ í†µí•œ ì—°ë ¹ì¸µ ì‹ë³„ê³¼ í‚¤ì˜¤ìŠ¤í¬ UI ë§ì¶¤í™” 
   - ë¸Œë¼ìš°ì €ì˜ ì¹´ë©”ë¼ í˜¸í™˜ê¸°ëŠ¥ì„ í†µí•´ í‚¤ì˜¤ìŠ¤í¬ ì‚¬ìš©ìì˜ ì–¼êµ´ ì‚¬ì§„ì„ ì°ê³  ì‚¬ìš©ìì˜ ë‚˜ì´ ê°’ë¥¼ ë„ì¶œ
   - ê²°ê³¼ê°’ì´ ê³ ë ¹ì¸µì¸ ê²½ìš°ì™€ ë¹„ê³ ë ¹ì¸µì¸ ê²½ìš°ë¥¼ êµ¬ë¶„í•´ì„œ í‚¤ì˜¤ìŠ¤í¬ ì£¼ë¬¸ UIë¥¼ ë§ì¶¤í™”í•´ì„œ ì œê³µ

<br>

#### (2) ê³ ë ¹ì¸µê³¼ ë¹„ê³ ë ¹ì¸µ ì£¼ë¬¸ë‹¨ê³„ ì°¨ë³„í™”
#### (2-1) ê³ ë ¹ì¸µ
1. ê³ ë ¹ì¸µì— ë§ì¶”ì–´ ë²„íŠ¼ ë° ê¸€ìì˜ í¬ê¸°ë¥¼ ê¸°ì¡´ ëŒ€ë¹„ í™•ëŒ€ ë° ë‹¨ìˆœí™”í•˜ì—¬ í¸ì˜ì„± í™•ëŒ€
2. í„°ì¹˜ë¥¼ ìµœì†Œí™” í•˜ê¸° ìœ„í•˜ì—¬ ìŒì„±ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ AIê°€ ì¶”ì²œë©”ë‰´ë¥¼ í™”ë©´ì— ì¶œë ¥
3. ë©”ë‰´ ì´ìš©ì— ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì œì™¸, ê³ ê°ì˜ ë‹ˆì¦ˆì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶œë ¥í•˜ì—¬ ì˜¤ì…ë ¥ ë°©ì§€
4. ì¬ì¶”ì²œ, ì¥ë°”êµ¬ë‹ˆ(ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ), ê²°ì œí•˜ê¸° ê¸°ëŠ¥ì„ ëª¨ë‘ ìŒì„±ì¸ì‹ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ êµ¬í˜„

#### (2-2) ë¹„ê³ ë ¹ì¸µ (ì¼ë°˜ì ì¸ í‚¤ì˜¤ìŠ¤í¬ í„°ì¹˜ ì£¼ë¬¸ + ìŒì„±ì¸ì‹ ë©”ë‰´ ì¶”ì²œ)
1. ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì¼ë°˜ì ì¸ í‚¤ì˜¤ìŠ¤í¬ì™€ ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥
2. í•„ìš”ì˜ ë”°ë¼ ìŒì„±ì…ë ¥ìœ¼ë¡œ AI ê¸°ëŠ¥ì„ ì‚¬ìš© ê°€ëŠ¥
3. ì–¸ì–´ì— ë§ì¶”ì–´ ë©”ë‰´ì™€ ë²„íŠ¼ì´ ë³€ê²½ ê°€ëŠ¥

<br>

#### (2-3) ê²°ì œ ì´í›„ ì£¼ë¬¸ë²ˆí˜¸ ë°°ì •
   - 2-1 ~ 2-2 ê³¼ì • í›„ ì£¼ë¬¸ë©”ë‰´ê°€ ë°ì´í„° ë² ì´ìŠ¤ì˜ ì €ì¥ì´ ë˜ë©° ì£¼ë¬¸ë²ˆí˜¸ ë°œê¸‰
   - ë§¤ì¼ë§ˆë‹¤ ì£¼ë¬¸ë²ˆí˜¸ê°€ ì´ˆê¸°í™”ë˜ì–´ 1ë²ˆ ë¶€í„° ì£¼ë¬¸ë²ˆí˜¸ê°€ ìƒì„±ëœë‹¤

<br>

### 2. ì ì£¼ (staff)
#### (1) ë©”ë‰´ CRUD
- ë©”ë‰´ ìƒì„± ì „ì— í•„ìš”í•œ í•´ì‹œíƒœê·¸ë“¤ì„ ë¯¸ë¦¬ ì„¤ì •í•˜ì—¬ ê° ë©”ë‰´ ë¶„ë¥˜ê¸°ëŠ¥ êµ¬í˜„
- ë©”ë‰´ ìƒì„±ì‹œì—ëŠ” ë©”ë‰´ ì´ë¦„, ê°€ê²©, í•´ì‹œíƒœê·¸, ì´ë¯¸ì§€ë¥¼ í•¨ê»˜ ì‘ì„±
  
#### (2) ì£¼ë¬¸ í˜„í™©
- í‚¤ì˜¤ìŠ¤í¬ë¥¼ í†µí•œ ê²°ì œëœ ë‚´ì—­ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ì£¼ë¬¸ì˜ ìƒíƒœë¥¼ í†µí•˜ì—¬ "ì£¼ë¬¸/ì§„í–‰ì¤‘/ì™„ë£Œ"ë¥¼ í™•ì¸ ê°€ëŠ¥

<br>

### 3. ê´€ë¦¬ì (superuser)
#### (1) staff CRUD ë° ë©”ë‰´ CRUD
- ìƒˆë¡œìš´ staffê³„ì •ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ë° ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ê° ê³„ì •ì˜ ë©”ë‰´ë¥¼ ìˆ˜ì • í•  ìˆ˜ ìˆë‹¤
#### (2) staffì— permission ë¶€ì—¬
- admin pageë‚´ì˜ groupì„ ìƒˆë¡œ ìƒì„±í•˜ì—¬ staffê°€ ë©”ë‰´ CRUDì—ë§Œ ì ‘ê·¼ê°€ëŠ¥í•˜ë„ë¡ ì œí•œí•œë‹¤

<br>

## ğŸ“„ ERD:
![SivlerLining (2)](https://github.com/billyhyunjun/Silver-Lining/assets/159408752/7ef6181b-7b38-4a7c-ae2f-6d6d880f0197)

<br><br>
